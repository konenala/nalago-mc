// Code generated by enhanced-generator v2 from protocol.json; DO NOT EDIT manually.
// To regenerate: go run main_v2.go -protocol <path> -output <dir> -direction client

package client

import (
	"fmt"
	pk "git.konjactw.dev/falloutBot/go-mc/net/packet"
	"git.konjactw.dev/patyhank/minego/pkg/protocol/packetid"
	"io"
)

// EntityUpdateAttributesPropertiesEntryModifiersEntry is a sub-structure used in the packet.
type EntityUpdateAttributesPropertiesEntryModifiersEntry struct {
	Uuid      string `mc:"String"`
	Amount    float64
	Operation int8
}

// ReadFrom reads the data from the reader.
func (p *EntityUpdateAttributesPropertiesEntryModifiersEntry) ReadFrom(r io.Reader) (n int64, err error) {
	var temp int64
	_ = temp

	var uuid pk.String
	temp, err = uuid.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.Uuid = string(uuid)

	temp, err = (*pk.Double)(&p.Amount).ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}

	var operation int8
	temp, err = (*pk.Byte)(&operation).ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.Operation = operation

	return n, nil
}

// WriteTo writes the data to the writer.
func (p EntityUpdateAttributesPropertiesEntryModifiersEntry) WriteTo(w io.Writer) (n int64, err error) {
	var temp int64
	_ = temp

	temp, err = pk.String(p.Uuid).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	temp, err = pk.Double(p.Amount).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	temp, err = pk.Byte(p.Operation).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	return n, nil
}

// EntityUpdateAttributesPropertiesEntry is a sub-structure used in the packet.
type EntityUpdateAttributesPropertiesEntry struct {
	// Mapper to string
	Key       string
	Value     float64
	Modifiers []EntityUpdateAttributesPropertiesEntryModifiersEntry
}

// ReadFrom reads the data from the reader.
func (p *EntityUpdateAttributesPropertiesEntry) ReadFrom(r io.Reader) (n int64, err error) {
	var temp int64
	_ = temp

	var mapperVal pk.VarInt
	temp, err = mapperVal.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	switch mapperVal {
	case 27:
		p.Key = "tempt_range"
	case 1:
		p.Key = "generic.armor_toughness"
	case 13:
		p.Key = "generic.follow_range"
	case 16:
		p.Key = "generic.knockback_resistance"
	case 7:
		p.Key = "burning_time"
	case 8:
		p.Key = "camera_distance"
	case 10:
		p.Key = "player.entity_interaction_range"
	case 12:
		p.Key = "generic.flying_speed"
	case 14:
		p.Key = "generic.gravity"
	case 20:
		p.Key = "generic.movement_speed"
	case 0:
		p.Key = "generic.armor"
	case 6:
		p.Key = "player.block_interaction_range"
	case 17:
		p.Key = "generic.luck"
	case 21:
		p.Key = "generic.safe_fall_distance"
	case 23:
		p.Key = "zombie.spawn_reinforcements"
	case 5:
		p.Key = "player.block_break_speed"
	case 9:
		p.Key = "explosion_knockback_resistance"
	case 19:
		p.Key = "generic.max_health"
	case 26:
		p.Key = "sweeping_damage_ratio"
	case 2:
		p.Key = "generic.attack_damage"
	case 4:
		p.Key = "generic.attack_speed"
	case 22:
		p.Key = "generic.scale"
	case 24:
		p.Key = "generic.step_height"
	case 25:
		p.Key = "submerged_mining_speed"
	case 28:
		p.Key = "water_movement_efficiency"
	case 29:
		p.Key = "waypoint_transmit_range"
	case 3:
		p.Key = "generic.attack_knockback"
	case 15:
		p.Key = "generic.jump_strength"
	case 18:
		p.Key = "generic.max_absorption"
	case 30:
		p.Key = "waypoint_receive_range"
	case 11:
		p.Key = "generic.fall_damage_multiplier"
	default:
		return n, fmt.Errorf("unknown mapper value %d for Key", mapperVal)
	}

	temp, err = (*pk.Double)(&p.Value).ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}

	var modifiersCount pk.VarInt
	temp, err = modifiersCount.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.Modifiers = make([]EntityUpdateAttributesPropertiesEntryModifiersEntry, modifiersCount)
	for i := 0; i < int(modifiersCount); i++ {
		temp, err = p.Modifiers[i].ReadFrom(r)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

// WriteTo writes the data to the writer.
func (p EntityUpdateAttributesPropertiesEntry) WriteTo(w io.Writer) (n int64, err error) {
	var temp int64
	_ = temp

	switch p.Key {
	case "tempt_range":
		temp, err = pk.VarInt(27).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.armor_toughness":
		temp, err = pk.VarInt(1).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.follow_range":
		temp, err = pk.VarInt(13).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.knockback_resistance":
		temp, err = pk.VarInt(16).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "burning_time":
		temp, err = pk.VarInt(7).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "camera_distance":
		temp, err = pk.VarInt(8).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "player.entity_interaction_range":
		temp, err = pk.VarInt(10).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.flying_speed":
		temp, err = pk.VarInt(12).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.gravity":
		temp, err = pk.VarInt(14).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.movement_speed":
		temp, err = pk.VarInt(20).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.armor":
		temp, err = pk.VarInt(0).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "player.block_interaction_range":
		temp, err = pk.VarInt(6).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.luck":
		temp, err = pk.VarInt(17).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.safe_fall_distance":
		temp, err = pk.VarInt(21).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "zombie.spawn_reinforcements":
		temp, err = pk.VarInt(23).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "player.block_break_speed":
		temp, err = pk.VarInt(5).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "explosion_knockback_resistance":
		temp, err = pk.VarInt(9).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.max_health":
		temp, err = pk.VarInt(19).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "sweeping_damage_ratio":
		temp, err = pk.VarInt(26).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.attack_damage":
		temp, err = pk.VarInt(2).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.attack_speed":
		temp, err = pk.VarInt(4).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.scale":
		temp, err = pk.VarInt(22).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.step_height":
		temp, err = pk.VarInt(24).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "submerged_mining_speed":
		temp, err = pk.VarInt(25).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "water_movement_efficiency":
		temp, err = pk.VarInt(28).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "waypoint_transmit_range":
		temp, err = pk.VarInt(29).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.attack_knockback":
		temp, err = pk.VarInt(3).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.jump_strength":
		temp, err = pk.VarInt(15).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.max_absorption":
		temp, err = pk.VarInt(18).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "waypoint_receive_range":
		temp, err = pk.VarInt(30).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	case "generic.fall_damage_multiplier":
		temp, err = pk.VarInt(11).WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	default:
		return n, fmt.Errorf("unknown Key value %v", p.Key)
	}

	temp, err = pk.Double(p.Value).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	temp, err = pk.VarInt(len(p.Modifiers)).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}
	for i := range p.Modifiers {
		temp, err = p.Modifiers[i].WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

// EntityUpdateAttributes represents the Clientbound EntityUpdateAttributes packet.

type EntityUpdateAttributes struct {
	EntityId   int32 `mc:"VarInt"`
	Properties []EntityUpdateAttributesPropertiesEntry
}

// PacketID returns the packet ID for this packet.
func (*EntityUpdateAttributes) PacketID() packetid.ClientboundPacketID {
	return packetid.ClientboundEntityUpdateAttributes
}

// ReadFrom reads the packet data from the reader.
func (p *EntityUpdateAttributes) ReadFrom(r io.Reader) (n int64, err error) {
	var temp int64
	_ = temp

	var entityId pk.VarInt
	temp, err = entityId.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.EntityId = int32(entityId)

	var propertiesCount pk.VarInt
	temp, err = propertiesCount.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.Properties = make([]EntityUpdateAttributesPropertiesEntry, propertiesCount)
	for i := 0; i < int(propertiesCount); i++ {
		temp, err = p.Properties[i].ReadFrom(r)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

// WriteTo writes the packet data to the writer.
func (p EntityUpdateAttributes) WriteTo(w io.Writer) (n int64, err error) {
	var temp int64
	_ = temp

	temp, err = pk.VarInt(p.EntityId).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	temp, err = pk.VarInt(len(p.Properties)).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}
	for i := range p.Properties {
		temp, err = p.Properties[i].WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

func init() {
	registerPacket(packetid.ClientboundEntityUpdateAttributes, func() ClientboundPacket {
		return &EntityUpdateAttributes{}
	})
}

// Code generated by enhanced-generator v2 from protocol.json; DO NOT EDIT manually.
// To regenerate: go run main_v2.go -protocol <path> -output <dir> -direction client

package client

import (
	pk "git.konjactw.dev/falloutBot/go-mc/net/packet"
	"git.konjactw.dev/patyhank/minego/pkg/protocol/packetid"
	"io"
)

// PlayerInfoDataEntry is a sub-structure used in the packet.
type PlayerInfoDataEntry struct {
	Uuid pk.UUID
	// TODO: Switch type - conditional field based on other field value
	Player interface{}
	// TODO: Switch type - conditional field based on other field value
	ChatSession interface{}
	// TODO: Switch type - conditional field based on other field value
	Gamemode interface{}
	// TODO: Switch type - conditional field based on other field value
	Listed interface{}
	// TODO: Switch type - conditional field based on other field value
	Latency interface{}
	// TODO: Switch type - conditional field based on other field value
	DisplayName interface{}
	// TODO: Switch type - conditional field based on other field value
	ListPriority interface{}
	// TODO: Switch type - conditional field based on other field value
	ShowHat interface{}
}

// ReadFrom reads the data from the reader.
func (p *PlayerInfoDataEntry) ReadFrom(r io.Reader) (n int64, err error) {
	var temp int64
	_ = temp

	temp, err = (*pk.UUID)(&p.Uuid).ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	// TODO: Implement switch field read

	return n, nil
}

// WriteTo writes the data to the writer.
func (p PlayerInfoDataEntry) WriteTo(w io.Writer) (n int64, err error) {
	var temp int64
	_ = temp

	temp, err = p.Uuid.WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	// TODO: Implement switch field write

	return n, nil
}

// PlayerInfo represents the Clientbound PlayerInfo packet.

type PlayerInfo struct {
	// TODO: Implement bitflags type
	Action interface{}
	Data   []PlayerInfoDataEntry
}

// PacketID returns the packet ID for this packet.
func (*PlayerInfo) PacketID() packetid.ClientboundPacketID {
	return packetid.ClientboundPlayerInfo
}

// ReadFrom reads the packet data from the reader.
func (p *PlayerInfo) ReadFrom(r io.Reader) (n int64, err error) {
	var temp int64
	_ = temp

	// TODO: Read Action

	var dataCount pk.VarInt
	temp, err = dataCount.ReadFrom(r)
	n += temp
	if err != nil {
		return n, err
	}
	p.Data = make([]PlayerInfoDataEntry, dataCount)
	for i := 0; i < int(dataCount); i++ {
		temp, err = p.Data[i].ReadFrom(r)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

// WriteTo writes the packet data to the writer.
func (p PlayerInfo) WriteTo(w io.Writer) (n int64, err error) {
	var temp int64
	_ = temp

	// TODO: Write Action

	temp, err = pk.VarInt(len(p.Data)).WriteTo(w)
	n += temp
	if err != nil {
		return n, err
	}
	for i := range p.Data {
		temp, err = p.Data[i].WriteTo(w)
		n += temp
		if err != nil {
			return n, err
		}
	}

	return n, nil
}

func init() {
	registerPacket(packetid.ClientboundPlayerInfo, func() ClientboundPacket {
		return &PlayerInfo{}
	})
}
